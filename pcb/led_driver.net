(export (version D)
  (design
    (source /home/kajus/Prace/dps/kicad/projects/headlamp/led_driver.sch)
    (date Út 1. prosinec 2015, 19:03:15 CET)
    (tool "Eeschema (2015-11-29 BZR 6336, Git 7b0d981)-product")
    (sheet (number 1) (name /) (tstamps /)
      (title_block
        (title "Headlamp led driver")
        (company Kajus)
        (rev 1.1)
        (date)
        (source led_driver.sch)
        (comment (number 1) (value "Based on http://ww1.microchip.com/downloads/en/AppNotes/00874C.pdf"))
        (comment (number 2) (value "Operates at ~130kHz, designed for ~1A per led"))
        (comment (number 3) (value "Turns off at 3V, max input voltage is 5,3V, designed for LiIon batteries"))
        (comment (number 4) (value "")))))
  (components
    (comp (ref D1)
      (value BAT60A)
      (footprint Diodes_SMD:SOD-323)
      (libsource (lib device) (part D_Schottky))
      (sheetpath (names /) (tstamps /))
      (tstamp 55847FE7))
    (comp (ref L1)
      (value 22uH)
      (footprint Choke_SMD:Choke_SMD_Wuerth-WE-PD2-Typ-MS)
      (libsource (lib pspice) (part INDUCTOR))
      (sheetpath (names /) (tstamps /))
      (tstamp 5584804C))
    (comp (ref D2)
      (value LED1)
      (footprint LEDs:LED-XP-G_CREE)
      (libsource (lib device) (part LED))
      (sheetpath (names /) (tstamps /))
      (tstamp 558480FB))
    (comp (ref R5)
      (value 0,1R)
      (footprint Resistors_SMD:R_1206)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 5584820F))
    (comp (ref SW1)
      (value UP)
      (footprint Buttons_Switches_SMD:SW_SPST_FSMSM)
      (libsource (lib device) (part SW_PUSH))
      (sheetpath (names /) (tstamps /))
      (tstamp 55882E33))
    (comp (ref SW2)
      (value DOWN)
      (footprint Buttons_Switches_SMD:SW_SPST_FSMSM)
      (libsource (lib device) (part SW_PUSH))
      (sheetpath (names /) (tstamps /))
      (tstamp 55882F5C))
    (comp (ref R10)
      (value 10k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 55882FCF))
    (comp (ref R11)
      (value 10k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 55883018))
    (comp (ref Q1)
      (value DMP2305U)
      (footprint Housings_SOT-23_SOT-143_TSOT-6:SOT-23_Handsoldering)
      (libsource (lib device) (part Q_PMOS_GSD))
      (sheetpath (names /) (tstamps /))
      (tstamp 55885412))
    (comp (ref R1)
      (value 82R)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 55885BDE))
    (comp (ref R2)
      (value 10k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 55885C16))
    (comp (ref R8)
      (value 2k2)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 5588846A))
    (comp (ref D4)
      (value BAT60A)
      (footprint Diodes_SMD:SOD-323)
      (libsource (lib device) (part D_Schottky))
      (sheetpath (names /) (tstamps /))
      (tstamp 5588927A))
    (comp (ref L2)
      (value 22uH)
      (footprint Choke_SMD:Choke_SMD_Wuerth-WE-PD2-Typ-MS)
      (libsource (lib pspice) (part INDUCTOR))
      (sheetpath (names /) (tstamps /))
      (tstamp 55889280))
    (comp (ref D5)
      (value LED2)
      (footprint LEDs:LED-XP-G_CREE)
      (libsource (lib device) (part LED))
      (sheetpath (names /) (tstamps /))
      (tstamp 55889286))
    (comp (ref R17)
      (value 0,1R)
      (footprint Resistors_SMD:R_1206)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 55889297))
    (comp (ref Q2)
      (value DMP2305U)
      (footprint Housings_SOT-23_SOT-143_TSOT-6:SOT-23_Handsoldering)
      (libsource (lib device) (part Q_PMOS_GSD))
      (sheetpath (names /) (tstamps /))
      (tstamp 558892A7))
    (comp (ref R12)
      (value 82R)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558892B5))
    (comp (ref R14)
      (value 10k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558892BB))
    (comp (ref R18)
      (value 2k2)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558892D2))
    (comp (ref D7)
      (value LED)
      (footprint LEDs:LED-0805)
      (libsource (lib device) (part LED))
      (sheetpath (names /) (tstamps /))
      (tstamp 558B5893))
    (comp (ref R19)
      (value 470R)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558B5940))
    (comp (ref C4)
      (value 820n)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558B6186))
    (comp (ref R6)
      (value 100k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558B6341))
    (comp (ref R15)
      (value 10k)
      (footprint Resistors_SMD:R_1206)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558BC0B6))
    (comp (ref R13)
      (value 10k)
      (footprint Resistors_SMD:R_1206)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558BE9D9))
    (comp (ref R3)
      (value 100k)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558C24EB))
    (comp (ref C2)
      (value 820n)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558C25EB))
    (comp (ref P1)
      (value POWER)
      (footprint Connect:GS2)
      (libsource (lib conn) (part CONN_01X02))
      (sheetpath (names /) (tstamps /))
      (tstamp 558C335D))
    (comp (ref C1)
      (value 470n)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558C597A))
    (comp (ref D6)
      (value LL103)
      (footprint Diodes_SMD:Diode-MiniMELF_Standard)
      (libsource (lib device) (part D))
      (sheetpath (names /) (tstamps /))
      (tstamp 558C7CA9))
    (comp (ref C8)
      (value 1u)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558CB967))
    (comp (ref C5)
      (value 1n)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558D02F7))
    (comp (ref C6)
      (value 1n)
      (footprint Capacitors_SMD:C_0805)
      (libsource (lib device) (part C_Small))
      (sheetpath (names /) (tstamps /))
      (tstamp 558D0396))
    (comp (ref R7)
      (value 4k7)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558F2640))
    (comp (ref R4)
      (value 4k7)
      (footprint Resistors_SMD:R_0805)
      (libsource (lib pspice) (part R))
      (sheetpath (names /) (tstamps /))
      (tstamp 558F2EB9))
    (comp (ref P2)
      (value ICSP)
      (footprint Housings_SOT-23_SOT-143_TSOT-6:SOT-143)
      (libsource (lib conn) (part CONN_01X04))
      (sheetpath (names /) (tstamps /))
      (tstamp 55A57924))
    (comp (ref U1)
      (value "PIC16(L)F616-I/ST")
      (footprint Housings_SSOP:TSSOP-14_4.4x5mm_Pitch0.65mm)
      (libsource (lib microchip_pic16mcu) (part "PIC16(L)F616-I/P"))
      (sheetpath (names /) (tstamps /))
      (tstamp 55A96DB1)))
  (libparts
    (libpart (lib conn) (part CONN_01X02)
      (description "Connector 01x02")
      (footprints
        (fp Pin_Header_Straight_1X02)
        (fp Pin_Header_Angled_1X02)
        (fp Socket_Strip_Straight_1X02)
        (fp Socket_Strip_Angled_1X02))
      (fields
        (field (name Reference) P)
        (field (name Value) CONN_01X02))
      (pins
        (pin (num 1) (name P1) (type passive))
        (pin (num 2) (name P2) (type passive))))
    (libpart (lib conn) (part CONN_01X04)
      (description "Connector 01x04")
      (footprints
        (fp Pin_Header_Straight_1X04)
        (fp Pin_Header_Angled_1X04)
        (fp Socket_Strip_Straight_1X04)
        (fp Socket_Strip_Angled_1X04))
      (fields
        (field (name Reference) P)
        (field (name Value) CONN_01X04))
      (pins
        (pin (num 1) (name P1) (type passive))
        (pin (num 2) (name P2) (type passive))
        (pin (num 3) (name P3) (type passive))
        (pin (num 4) (name P4) (type passive))))
    (libpart (lib device) (part C_Small)
      (description "Unpolarized capacitor")
      (footprints
        (fp C?)
        (fp C_????_*)
        (fp C_????)
        (fp SMD*_c)
        (fp Capacitor*))
      (fields
        (field (name Reference) C)
        (field (name Value) C_Small))
      (pins
        (pin (num 1) (name ~) (type passive))
        (pin (num 2) (name ~) (type passive))))
    (libpart (lib device) (part D)
      (description Diode)
      (footprints
        (fp Diode_*)
        (fp D-Pak_TO252AA)
        (fp *SingleDiode)
        (fp *_Diode_*)
        (fp *SingleDiode*))
      (fields
        (field (name Reference) D)
        (field (name Value) D))
      (pins
        (pin (num 1) (name K) (type passive))
        (pin (num 2) (name A) (type passive))))
    (libpart (lib device) (part D_Schottky)
      (description "Diode schottky")
      (footprints
        (fp D-Pak_TO252AA)
        (fp Diode_*)
        (fp *SingleDiode)
        (fp *SingleDiode*)
        (fp *_Diode_*))
      (fields
        (field (name Reference) D)
        (field (name Value) D_Schottky))
      (pins
        (pin (num 1) (name K) (type passive))
        (pin (num 2) (name A) (type passive))))
    (libpart (lib pspice) (part INDUCTOR)
      (fields
        (field (name Reference) L)
        (field (name Value) INDUCTOR))
      (pins
        (pin (num 1) (name 1) (type input))
        (pin (num 2) (name 2) (type input))))
    (libpart (lib device) (part LED)
      (footprints
        (fp LED-3MM)
        (fp LED-5MM)
        (fp LED-10MM)
        (fp LED-0603)
        (fp LED-0805)
        (fp LED-1206)
        (fp LEDV))
      (fields
        (field (name Reference) D)
        (field (name Value) LED))
      (pins
        (pin (num 1) (name K) (type passive))
        (pin (num 2) (name A) (type passive))))
    (libpart (lib microchip_pic16mcu) (part "PIC16(L)F616-I/P")
      (description "2048W FLASH, 128B SRAM, PDIP-14")
      (docs http://ww1.microchip.com/downloads/en/DeviceDoc/41288F.pdf)
      (footprints
        (fp DIP*)
        (fp PDIP*)
        (fp SO*))
      (fields
        (field (name Reference) U)
        (field (name Value) "PIC16(L)F616-I/P"))
      (pins
        (pin (num 1) (name VDD) (type power_in))
        (pin (num 2) (name RA5/T1CKI/OSC1/CLKIN) (type BiDi))
        (pin (num 3) (name RA4/AN3/~T1G~/OSC2/CLKOUT) (type BiDi))
        (pin (num 4) (name RA3/~MCLR~/Vpp) (type input))
        (pin (num 5) (name P1A/CCP1/RC5) (type BiDi))
        (pin (num 6) (name P1B/C2OUT/RC4) (type BiDi))
        (pin (num 7) (name P1C/C12IN3-/AN7/RC3) (type BiDi))
        (pin (num 8) (name P1D/C12IN2-/AN6/RC2) (type BiDi))
        (pin (num 9) (name C12IN1-/AN5/RC1) (type BiDi))
        (pin (num 10) (name C2IN+/AN4/RC0) (type BiDi))
        (pin (num 11) (name RA2/AN2/T0CKI/INT/C1OUT) (type BiDi))
        (pin (num 12) (name RA1/AN1/C12IN0-/Vref/ICSPCLK) (type BiDi))
        (pin (num 13) (name RA0/AN0/C1IN+/ICSPDAT) (type BiDi))
        (pin (num 14) (name VSS) (type power_in))))
    (libpart (lib device) (part Q_PMOS_GSD)
      (description "Transistor P-MOSFET (general)")
      (fields
        (field (name Reference) Q)
        (field (name Value) Q_PMOS_GSD))
      (pins
        (pin (num 1) (name G) (type input))
        (pin (num 2) (name S) (type passive))
        (pin (num 3) (name D) (type passive))))
    (libpart (lib pspice) (part R)
      (description Resistance)
      (fields
        (field (name Reference) R)
        (field (name Value) R))
      (pins
        (pin (num 1) (name ~) (type passive))
        (pin (num 2) (name ~) (type passive))))
    (libpart (lib device) (part SW_PUSH)
      (description Button)
      (fields
        (field (name Reference) SW)
        (field (name Value) SW_PUSH))
      (pins
        (pin (num 1) (name 1) (type passive))
        (pin (num 2) (name 2) (type passive)))))
  (libraries
    (library (logical conn)
      (uri /home/kajus/Prace/dps/kicad/kicad-library/library/conn.lib))
    (library (logical pspice)
      (uri /home/kajus/Prace/dps/kicad/kicad-library/library/pspice.lib))
    (library (logical microchip_pic16mcu)
      (uri /home/kajus/Prace/dps/kicad/kicad-library/library/microchip_pic16mcu.lib))
    (library (logical device)
      (uri /home/kajus/Prace/dps/kicad/kicad-library/library/device.lib)))
  (nets
    (net (code 1) (name GND)
      (node (ref P2) (pin 2))
      (node (ref D1) (pin 2))
      (node (ref P1) (pin 1))
      (node (ref C6) (pin 2))
      (node (ref SW2) (pin 1))
      (node (ref SW1) (pin 1))
      (node (ref C4) (pin 2))
      (node (ref R7) (pin 2))
      (node (ref R4) (pin 2))
      (node (ref C1) (pin 2))
      (node (ref U1) (pin 14))
      (node (ref R5) (pin 2))
      (node (ref D4) (pin 2))
      (node (ref C5) (pin 2))
      (node (ref C8) (pin 2))
      (node (ref C2) (pin 2))
      (node (ref R17) (pin 2)))
    (net (code 2) (name VCC)
      (node (ref R2) (pin 1))
      (node (ref R14) (pin 1))
      (node (ref D6) (pin 2))
      (node (ref Q1) (pin 2))
      (node (ref P1) (pin 2))
      (node (ref C1) (pin 1))
      (node (ref Q2) (pin 2)))
    (net (code 3) (name +5V)
      (node (ref R11) (pin 1))
      (node (ref R10) (pin 1))
      (node (ref D6) (pin 1))
      (node (ref C8) (pin 1))
      (node (ref U1) (pin 1)))
    (net (code 4) (name /PWM2)
      (node (ref R3) (pin 1))
      (node (ref U1) (pin 8)))
    (net (code 5) (name /REF2)
      (node (ref R3) (pin 2))
      (node (ref U1) (pin 9))
      (node (ref R4) (pin 1))
      (node (ref C2) (pin 1)))
    (net (code 6) (name /PWM1)
      (node (ref R19) (pin 2))
      (node (ref R6) (pin 1))
      (node (ref U1) (pin 2)))
    (net (code 7) (name "Net-(R11-Pad2)")
      (node (ref SW2) (pin 2))
      (node (ref R11) (pin 2))
      (node (ref U1) (pin 3)))
    (net (code 8) (name /ICSPCLK)
      (node (ref P2) (pin 4))
      (node (ref U1) (pin 12))
      (node (ref R15) (pin 2)))
    (net (code 9) (name /ICSPDAT)
      (node (ref U1) (pin 13))
      (node (ref R13) (pin 1))
      (node (ref P2) (pin 3)))
    (net (code 10) (name "Net-(D5-Pad1)")
      (node (ref R17) (pin 1))
      (node (ref D5) (pin 1))
      (node (ref R18) (pin 1)))
    (net (code 11) (name "Net-(D2-Pad1)")
      (node (ref D2) (pin 1))
      (node (ref R5) (pin 1))
      (node (ref R8) (pin 1)))
    (net (code 12) (name "Net-(D5-Pad2)")
      (node (ref D5) (pin 2))
      (node (ref L2) (pin 2)))
    (net (code 13) (name /VOLTAGE)
      (node (ref R19) (pin 1))
      (node (ref D7) (pin 2))
      (node (ref U1) (pin 7)))
    (net (code 14) (name "Net-(D7-Pad1)")
      (node (ref D7) (pin 1))
      (node (ref U1) (pin 5)))
    (net (code 15) (name /REF1)
      (node (ref C4) (pin 1))
      (node (ref R6) (pin 2))
      (node (ref R7) (pin 1))
      (node (ref R13) (pin 2)))
    (net (code 16) (name "Net-(D1-Pad1)")
      (node (ref D1) (pin 1))
      (node (ref L1) (pin 1))
      (node (ref Q1) (pin 3)))
    (net (code 17) (name /FET1)
      (node (ref R1) (pin 2))
      (node (ref U1) (pin 11)))
    (net (code 18) (name /SENSE1)
      (node (ref R15) (pin 1))
      (node (ref R8) (pin 2))
      (node (ref C5) (pin 1)))
    (net (code 19) (name /SENSE2)
      (node (ref C6) (pin 1))
      (node (ref U1) (pin 10))
      (node (ref R18) (pin 2)))
    (net (code 20) (name /FET2)
      (node (ref U1) (pin 6))
      (node (ref R12) (pin 2)))
    (net (code 21) (name "Net-(Q1-Pad1)")
      (node (ref R2) (pin 2))
      (node (ref Q1) (pin 1))
      (node (ref R1) (pin 1)))
    (net (code 22) (name "Net-(D2-Pad2)")
      (node (ref D2) (pin 2))
      (node (ref L1) (pin 2)))
    (net (code 23) (name /VPP)
      (node (ref U1) (pin 4))
      (node (ref P2) (pin 1))
      (node (ref R10) (pin 2))
      (node (ref SW1) (pin 2)))
    (net (code 24) (name "Net-(D4-Pad1)")
      (node (ref Q2) (pin 3))
      (node (ref D4) (pin 1))
      (node (ref L2) (pin 1)))
    (net (code 25) (name "Net-(Q2-Pad1)")
      (node (ref R12) (pin 1))
      (node (ref R14) (pin 2))
      (node (ref Q2) (pin 1)))))